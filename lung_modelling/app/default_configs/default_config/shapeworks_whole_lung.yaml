dataset_root: null

use_multiprocessing: True

tasks:
  initialize:
    dataset_config_filename: "dataset_config.json"
    use_directory_index: False
    skip_dirs: [ ]
    select_dirs: [ ]

  smooth_whole_lungs_sw:
    results_directory: "smooth_whole_lungs_sw"
    output_filenames: { left_lung: [ "lul", "lll" ], right_lung: [ "rul", "rml", "rll" ] }
    params: { maximumRMSError: 0.009999999776482582, numberOfIterations: 30 }

  create_meshes_sw:
    source_directory: "smooth_whole_lungs_sw"
    results_directory: "create_meshes_whole_lungs_sw"
    params: { remesh: False, remesh_percentage: 0.99, adaptivity: 1, smooth: True, smooth_iterations: 10, relaxation: 1, fill_holes: True, hole_size: 100 }

  reference_selection_mesh_sw:
    source_directory: "create_meshes_whole_lungs_sw"
    results_directory: "reference_selection_mesh_whole_lungs_sw"

  mesh_transform_sw:
    source_directory_initialize: "reference_selection_mesh_whole_lungs_sw"
    source_directory: "create_meshes_whole_lungs_sw"
    results_directory: "mesh_transform_sw"
    params: { iterations: 100 }

  optimize_meshes_sw:
    source_directory_transform: "mesh_transform_sw"
    source_directory_mesh: "create_meshes_whole_lungs_sw"
    results_directory: "optimize_meshes_sw"
    params: {
      checkpointing_interval: 200,
      keep_checkpoints: 0,
      iterations_per_split: 2500,
      optimization_iterations: 200,
      starting_regularization: 1000,
      ending_regularization: 10,
      relative_weighting: 3,
      initial_relative_weighting: 0.05,
      save_init_splits: 0,
      verbosity: 0,
      use_normals: 1,
      normals_strength: 5.0,
      procrustes: 1,
      procrustes_scaling: 1,
      procrustes_rotation_translation: 1,
      number_of_particles: [ 256,256 ]
    }

  logging:

run_tasks: [ "smooth_whole_lungs_sw", "create_meshes_sw", "reference_selection_mesh_sw", "mesh_transform_sw", "optimize_meshes_sw" ]